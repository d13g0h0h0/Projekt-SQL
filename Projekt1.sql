DROP TABLE Timetables;
DROP TABLE LineStopRelation;
DROP TABLE Stops;
DROP TABLE Lines;

CREATE TABLE Stops(
	ID INT IDENTITY(0, 1),
	Name NVARCHAR(256) UNIQUE NOT NULL,
	CONSTRAINT PK_Stops PRIMARY KEY(ID)
)

CREATE TABLE Lines(
	ID INT IDENTITY(0, 1),
	Name NVARCHAR(10) UNIQUE NOT NULL,
	CONSTRAINT PK_Lines PRIMARY KEY(ID)
)

CREATE TABLE LineStopRelation(
	ID INT IDENTITY(0, 1),
	ID_Line INT NOT NULL,
	ID_Stop INT NOT NULL,
	StopOrder INT NOT NULL,
	CONSTRAINT PK_LineStopRelation PRIMARY KEY (ID),
	CONSTRAINT UC_LineStopOrder UNIQUE(ID_Line, StopOrder),
	CONSTRAINT FK_ID_Stop FOREIGN KEY(ID_Stop) REFERENCES Stops(ID),
	CONSTRAINT FK_ID_Line FOREIGN KEY(ID_Line) REFERENCES Lines(ID),
)

CREATE TABLE Timetables(
	ID INT IDENTITY(0, 1),
	ID_LineStopRelation INT NOT NULL,
	Time TIME(0) NOT NULL,
	Direction NCHAR NOT NULL,
	CONSTRAINT PK_Timetables PRIMARY KEY(ID),
	CONSTRAINT FK_ID_LineStopRelation FOREIGN KEY(ID_LineStopRelation) REFERENCES LineStopRelation(ID),
	CONSTRAINT CK_Direction CHECK (Direction IN (N'A', N'B'))
)

INSERT INTO Stops VALUES
(N'Kurczaki'),
(N'Paderewskiego'),
(N'plac Niepodległości'),
(N'Piotrkowska Centrum'),
(N'Zamenhofa'),
(N'Kilińskiego'),
(N'Doły'),
(N'rondo Lotników Lwowskich'),
(N'Przędzalniana'),
(N'Niciarniana'),
(N'Lutomierska'),
(N'Pomorska'),
(N'Chocianowice IKEA'),
(N'Dworzec Łódź Widzew'),
(N'Łazowskiego'),
(N'Stoki'),
(N'Kopernika'),
(N'Inflancka'),
(N'Manufaktura'),
(N'Zgierska')

INSERT INTO Lines VALUES
(N'6'),
(N'8'),
(N'15'),
(N'61'),
(N'75A'),
(N'75B'),
(N'N2')

INSERT INTO LineStopRelation VALUES
(0, 0, 0), (0, 2, 1), (0, 4, 2), (0, 5, 3), (0, 8, 4), (0, 6, 5),
(1, 0, 0), (1, 1, 1), (1, 3, 2), (1, 8, 3), (1, 16, 4), (1, 18, 5), (1, 13, 6),
(2, 19, 0), (2, 17, 1), (2, 7, 2), (2, 9, 3), (2, 16, 4), (2, 15, 5), (2, 3, 6), (2, 10, 7), (2, 12, 8),
(3, 4, 0), (3, 14, 1), (3, 9, 2), (3, 10, 3),
(4, 0, 0), (4, 2, 1), (4, 5, 2), (4, 17, 3), (4, 12, 4), (4, 4, 5), (4, 11, 6), (4, 15, 7),
(5, 0, 0), (5, 2, 1), (5, 1, 2), (5, 17, 3), (5, 8, 4), (5, 4, 5), (5, 11, 6), (5, 15, 7),
(6, 3, 0), (6, 4, 1), (6, 9, 2), (6, 11, 3)

INSERT INTO Timetables VALUES
(0, '08:00:00', 'A'), (0, '12:30:00', 'A'), (0, '21:27:00', 'A'), (0, '10:24:00', 'B'), (0, '15:59:00', 'B'), (0, '23:38:00', 'B'),
(1, '08:09:00', 'A'), (1, '12:34:00', 'A'), (1, '21:29:00', 'A'), (1, '10:20:00', 'B'), (1, '15:46:00', 'B'), (1, '23:25:00', 'B'),
(2, '08:13:00', 'A'), (2, '12:38:00', 'A'), (2, '21:35:00', 'A'), (2, '10:16:00', 'B'), (2, '15:43:00', 'B'), (2, '23:22:00', 'B'),
(3, '08:19:00', 'A'), (3, '12:53:00', 'A'), (3, '21:38:00', 'A'), (3, '10:12:00', 'B'), (3, '15:38:00', 'B'), (3, '23:18:00', 'B'),
(4, '08:27:00', 'A'), (4, '13:01:00', 'A'), (4, '21:44:00', 'A'), (4, '10:10:00', 'B'), (4, '15:35:00', 'B'), (4, '23:15:00', 'B'),
(5, '08:29:00', 'A'), (5, '13:33:00', 'A'), (5, '21:48:00', 'A'), (5, '10:02:00', 'B'), (5, '15:32:00', 'B'), (5, '23:13:00', 'B'),
(6, '07:30:00', 'A'), (6, '17:17:00', 'A'), (6, '12:24:00', 'B'), (6, '19:40:00', 'B'),
(7, '07:35:00', 'A'), (7, '17:23:00', 'A'), (7, '12:22:00', 'B'), (7, '19:36:00', 'B'),
(8, '07:43:00', 'A'), (8, '17:28:00', 'A'), (8, '12:14:00', 'B'), (8, '19:30:00', 'B'),
(9, '07:54:00', 'A'), (9, '17:36:00', 'A'), (9, '12:10:00', 'B'), (9, '19:26:00', 'B'),
(10, '08:03:00', 'A'), (10, '17:42:00', 'A'), (10, '12:06:00', 'B'), (10, '19:24:00', 'B'),
(11, '08:12:00', 'A'), (11, '17:47:00', 'A'), (11, '12:03:00', 'B'), (11, '19:19:00', 'B'),
(12, '08:16:00', 'A'), (12, '17:50:00', 'A'), (12, '11:58:00', 'B'), (12, '19:15:00', 'B'),
(13, '12:00:00', 'A'), (13, '16:23:00', 'A'), (13, '20:08:00', 'A'), (13, '05:03:00', 'B'), (13, '11:46:00', 'B'), (13, '14:12:00', 'B'),
(14, '12:04:00', 'A'), (14, '16:27:00', 'A'), (14, '20:12:00', 'A'), (14, '05:01:00', 'B'), (14, '11:44:00', 'B'), (14, '14:04:00', 'B'),
(15, '12:12:00', 'A'), (15, '16:32:00', 'A'), (15, '20:14:00', 'A'), (15, '04:58:00', 'B'), (15, '11:41:00', 'B'), (15, '14:00:00', 'B'),
(16, '12:15:00', 'A'), (16, '16:36:00', 'A'), (16, '20:18:00', 'A'), (16, '04:54:00', 'B'), (16, '11:37:00', 'B'), (16, '13:51:00', 'B'),
(17, '12:18:00', 'A'), (17, '16:43:00', 'A'), (17, '20:21:00', 'A'), (17, '04:51:00', 'B'), (17, '11:33:00', 'B'), (17, '13:45:00', 'B'),
(18, '12:26:00', 'A'), (18, '16:45:00', 'A'), (18, '20:24:00', 'A'), (18, '04:48:00', 'B'), (18, '11:31:00', 'B'), (18, '13:41:00', 'B'),
(19, '12:34:00', 'A'), (19, '16:47:00', 'A'), (19, '20:26:00', 'A'), (19, '04:46:00', 'B'), (19, '11:28:00', 'B'), (19, '13:39:00', 'B'),
(20, '12:37:00', 'A'), (20, '16:52:00', 'A'), (20, '20:27:00', 'A'), (20, '04:43:00', 'B'), (20, '11:25:00', 'B'), (20, '13:38:00', 'B'),
(21, '12:42:00', 'A'), (21, '16:56:00', 'A'), (21, '20:28:00', 'A'), (21, '04:40:00', 'B'), (21, '11:20:00', 'B'), (21, '13:31:00', 'B'),
(22, '13:14:00', 'A'), (22, '22:18:00', 'A'), (22, '12:37:00', 'B'), (22, '19:22:00', 'B'),
(23, '13:16:00', 'A'), (23, '22:21:00', 'A'), (23, '12:33:00', 'B'), (23, '19:15:00', 'B'),
(24, '13:23:00', 'A'), (24, '22:25:00', 'A'), (24, '12:24:00', 'B'), (24, '19:10:00', 'B'),
(25, '13:28:00', 'A'), (25, '22:29:00', 'A'), (25, '12:21:00', 'B'), (25, '19:04:00', 'B'),
(26, '09:28:00', 'A'), (26, '16:36:00', 'B'),
(27, '09:31:00', 'A'), (27, '16:34:00', 'B'),
(28, '09:33:00', 'A'), (28, '16:29:00', 'B'),
(29, '09:36:00', 'A'), (29, '16:27:00', 'B'),
(30, '09:38:00', 'A'), (30, '16:26:00', 'B'),
(31, '09:43:00', 'A'), (31, '16:24:00', 'B'),
(32, '09:45:00', 'A'), (32, '16:21:00', 'B'),
(33, '09:47:00', 'A'), (33, '16:16:00', 'B'),
(34, '13:55:00', 'A'), (34, '20:07:00', 'B'),
(35, '13:56:00', 'A'), (35, '20:04:00', 'B'),
(36, '14:02:00', 'A'), (36, '20:02:00', 'B'),
(37, '14:06:00', 'A'), (37, '19:56:00', 'B'),
(38, '14:07:00', 'A'), (38, '19:53:00', 'B'),
(39, '14:14:00', 'A'), (39, '19:46:00', 'B'),
(40, '14:17:00', 'A'), (40, '19:44:00', 'B'),
(41, '14:20:00', 'A'), (41, '19:41:00', 'B'),
(42, '08:13:00', 'A'), (42, '18:00:00', 'A'), (42, '15:04:00', 'B'), (42, '19:19:00', 'B'),
(43, '08:18:00', 'A'), (43, '18:20:00', 'A'), (43, '14:56:00', 'B'), (43, '19:15:00', 'B'),
(44, '08:25:00', 'A'), (44, '18:23:00', 'A'), (44, '14:48:00', 'B'), (44, '19:11:00', 'B'),
(45, '08:40:00', 'A'), (45, '18:27:00', 'A'), (45, '14:43:00', 'B'), (45, '19:06:00', 'B')
--SELECT * FROM Lines ORDER BY Lines.ID
--SELECT * FROM Stops ORDER BY Stops.ID
SELECT * FROM LineStopRelation
SELECT * FROM Timetables





